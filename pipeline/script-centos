podTemplate(name: 'stx-build-centos', cloud: 'kubernetes',
  namespace: 'devops', label: 'stx-build-centos',
  serviceAccount: 'default', containers: [
  containerTemplate(
      name: 'stx-build-centos',
      image: 'kunpeng4code/stx-builder:centos',
      ttyEnabled: true,
      privileged: false,
      alwaysPullImage:true
      )
  ],
  volumes: [
    persistentVolumeClaim(mountPath: '/tmp', claimName: 'devops-stxbuild-centos')
  ]) {
  node("stx-build-centos"){
    stage('build srpm') {
      container('stx-build-centos') {
          sh """
          build-repo --repo https://opendev.org/starlingx/fault.git --type std --workdir /tmp
          """
      }
    }

    stage('show') {
      container('stx-build-centos') {
          sh """
          find /tmp
          """
      }
    }
    }
}